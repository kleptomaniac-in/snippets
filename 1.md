how do I create a reusable java component to display data in a table format using freemarker template based on provided source, criteria,  columns to display,  labels for the columns

Create a reusable Java component by designing a service class that processes input data (source), applies filtering criteria, selects columns with custom labels, and renders an HTML table via FreeMarker templates for flexible display in web apps or PDF generation.

## Component Design
Build a `TableRenderer` class that accepts generic data sources like `List<Map<String, Object>>`, column definitions (`List<ColumnDef>` where `ColumnDef` holds field name and label), and criteria as a `Predicate<Map<String, Object>>`. This promotes reusability across Spring Boot services, aligning with modular monolith patterns. The class loads a reusable FreeMarker template (`table.ftl`) from classpath resources.[4][6]

## FreeMarker Template
Store `table.ftl` in `src/main/resources/templates/` with this structure for dynamic tables:

```
<table border="1" class="data-table">
  <thead>
    <tr>
      <#list columns as col>
        <th>${col.label}</th>
      </#list>
    </tr>
  </thead>
  <tbody>
    <#list filteredData as row>
      <tr>
        <#list columns as col>
          <td>${row[col.field]?string}</td>
        </#list>
      </tr>
    </#list>
  </tbody>
</table>
```

This template iterates over `columns` (field-label pairs) and `filteredData` (processed rows), ensuring clean separation of logic and presentation.[8]

## Java Implementation
```java
@Service
public class TableRenderer {
    private final Configuration freemarkerConfig;

    public TableRenderer() {
        freemarkerConfig = new Configuration(Configuration.VERSION_2_3_32);
        freemarkerConfig.setClassForTemplateLoading(getClass(), "/templates");
        freemarkerConfig.setDefaultEncoding("UTF-8");
    }

    public String renderTable(List<Map<String, Object>> source, 
                             List<ColumnDef> columns, 
                             Predicate<Map<String, Object>> criteria) throws Exception {
        List<Map<String, Object>> filteredData = source.stream()
            .filter(criteria)
            .map(row -> {
                Map<String, Object> projected = new HashMap<>();
                columns.forEach(col -> projected.put(col.getField(), row.get(col.getField())));
                return projected;
            })
            .collect(Collectors.toList());

        Map<String, Object> dataModel = new HashMap<>();
        dataModel.put("filteredData", filteredData);
        dataModel.put("columns", columns.stream().map(ColumnDef::toMap).collect(Collectors.toList()));

        Template template = freemarkerConfig.getTemplate("table.ftl");
        StringWriter writer = new StringWriter();
        template.process(dataModel, writer);
        return writer.toString();
    }
}

@Data
public class ColumnDef {
    private String field;
    private String label;
    public Map<String, Object> toMap() {
        return Map.of("field", field, "label", label);
    }
}
```
Use via `@Autowired TableRenderer renderer;` then call `renderer.renderTable(data, columns, criteria)` for HTML output.[2][6]

## Usage Example
In a controller or service:
```java
List<ColumnDef> columns = Arrays.asList(
    new ColumnDef("name", "Employee Name"),
    new ColumnDef("salary", "Salary")
);
Predicate<Map<String, Object>> activeOnly = row -> (Boolean) row.get("active");
String htmlTable = renderer.renderTable(employeeData, columns, activeOnly);
```
This generates customizable tables, ideal for dynamic PDF reports with libraries like iText.[4]

Citations:
[1] How to Use JTable to Display Data https://www.zentut.com/java-swing/how-to-use-jtable-to-display-data/
[2] Template (FreeMarker 2.3.20 API) https://freemarker.sourceforge.io/docs/api/freemarker/template/Template.html
[3] JTable (Java Platform SE 8 ) - Oracle https://docs.oracle.com/javase/8/docs/api/javax/swing/JTable.html
[4] Java FreeMarker - working with FreeMarker Java template engine https://zetcode.com/java/freemarker/
[5] How to Create Tables in Java https://dzone.com/articles/how-to-create-tables-in-java
[6] Create a data-model - Apache FreeMarker Manual https://freemarker.apache.org/docs/pgui_quickstart_createdatamodel.html
[7] How to Retrieve and Display Database Records in Java ... https://www.c-sharpcorner.com/article/how-to-retrieve-and-display-database-records-in-java-using-jtable/
[8] how create table with text inside in Freemarker Template? https://stackoverflow.com/questions/52186114/how-create-table-with-text-inside-in-freemarker-template
[9] Best way to display Components in a JTable? - java https://stackoverflow.com/questions/9313023/best-way-to-display-components-in-a-jtable
[10] Template + data-model = output - Apache FreeMarker Manual https://freemarker.apache.org/docs/dgui_quickstart_basics.html
